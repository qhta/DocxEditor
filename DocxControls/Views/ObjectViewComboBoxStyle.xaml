<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:DocxControls"
                    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                    xmlns:cnv="clr-namespace:Qhta.WPF.Converters;assembly=Qhta.WPF.Converters"
                    xmlns:resources="clr-namespace:DocxControls.Resources">
  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="pack://application:,,,/DocxControls;component/Views/PropertiesViewResources.xaml"/>
  </ResourceDictionary.MergedDictionaries>
  <cnv:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
  <Style TargetType="{x:Type local:ObjectViewComboBox}">
    <Setter Property="Padding" Value="2,0,0,0"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type local:ObjectViewComboBox}">
          <Grid>
            <ToggleButton
              x:Name="ToggleButton"
              Content="{TemplateBinding Text}"
              HorizontalContentAlignment="Left"
              Padding="{Binding Padding, RelativeSource={RelativeSource TemplatedParent}}"
              IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" />
            <Popup
              x:Name="Popup"
              Placement="Bottom"
              IsOpen="{TemplateBinding IsDropDownOpen}"
              AllowsTransparency="True"
              Focusable="False"
              PopupAnimation="Slide">
              <Border BorderBrush="Black" BorderThickness="1" Background="White">
                <StackPanel >
                  <DataGrid ItemsSource="{Binding Items, RelativeSource={RelativeSource TemplatedParent}}"
                          HeadersVisibility="None" AutoGenerateColumns="False" 
                          CanUserAddRows="False" 
                          CanUserDeleteRows="False">
                    <DataGrid.Resources>
                      <Style TargetType="DataGridCell">
                        <Setter Property="BorderThickness" Value="0" />
                        <Setter Property="Padding" Value="0" />
                      </Style>
                    </DataGrid.Resources>
                    <DataGrid.Columns>
                      <DataGridTemplateColumn
                        CellTemplate="{StaticResource PropertyCaptionTemplate}" 
                        MinWidth="100"/>
                      <DataGridTemplateColumn 
                        CellTemplateSelector="{StaticResource PropertyValueTemplateSelector}" 
                        MinWidth="50"
                        Width="auto"/>
                    </DataGrid.Columns>
                  </DataGrid>
                  <StackPanel
                    Visibility ="{Binding ObjectViewModel.IsContainer, Converter={StaticResource BoolToVisibilityConverter}}"                    
                    >

                    <Border BorderBrush="DarkGray" BorderThickness="1" Background="WhiteSmoke" Padding="5,0">
                      <TextBlock Text="{x:Static resources:Strings.Elements_}" Foreground="Black"/>
                    </Border>
                    <DataGrid ItemsSource="{Binding DataContext.ObjectViewModel.ObjectMembers, RelativeSource={RelativeSource TemplatedParent}}"
                            HeadersVisibility="None" AutoGenerateColumns="false" 
                            CanUserAddRows="True" 
                            CanUserDeleteRows="True"
                            Background="Aquamarine"
                            MinHeight="50" MinWidth="100">
                      <DataGrid.Resources>
                        <Style TargetType="DataGridCell">
                          <Setter Property="BorderThickness" Value="0" />
                          <Setter Property="Padding" Value="0" />
                        </Style>
                      </DataGrid.Resources>
                      <DataGrid.Columns>
                        <DataGridTemplateColumn
                          CellTemplate="{StaticResource ObjectTypeNameTemplate}" 
                          MinWidth="100"/>
                        <DataGridTemplateColumn 
                          CellTemplateSelector="{StaticResource PropertyValueTemplateSelector}" 
                          MinWidth="50"
                          Width="auto"/>
                      </DataGrid.Columns>
                    </DataGrid>
                  </StackPanel>
                </StackPanel>
              </Border>
            </Popup>
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ResourceDictionary>
